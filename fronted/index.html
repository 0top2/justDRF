<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ DRF åšå®¢</title>
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f6f8; margin: 0; color: #333; }
        a { text-decoration: none; color: #007bff; cursor: pointer; }

        /* --- å¯¼èˆªæ  --- */
        nav { background-color: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 0.8rem 2rem; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .logo { font-size: 1.5rem; font-weight: bold; color: #2c3e50; }

        /* --- å¯¼èˆªæ å³ä¾§ & å¤´åƒä¸‹æ‹‰èœå• --- */
        .nav-right { display: flex; align-items: center; gap: 15px; }
        .user-avatar-nav { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; cursor: pointer; border: 2px solid #eee; transition: all 0.2s; }
        .user-avatar-nav:hover { border-color: #007bff; }

        .dropdown { position: relative; display: inline-block; }
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #fff;
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            z-index: 1;
            margin-top: 5px;
        }
        .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; font-size: 0.9rem; transition: background 0.2s; }
        .dropdown-content a:hover { background-color: #f1f1f1; color: #007bff; }
        .show-dropdown .dropdown-content { display: block; }

        /* --- å®¹å™¨å¸ƒå±€ --- */
        .container { max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
        .page-section { display: none; }
        .active-section { display: block; animation: fadeIn 0.3s; }

        /* --- æŒ‰é’®æ ·å¼ --- */
        .btn-primary { background-color: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; width: 100%; }
        .btn-outline { background-color: transparent; border: 1px solid #007bff; color: #007bff; padding: 8px 16px; border-radius: 4px; cursor: pointer; width: 100%; }
        .btn-danger { background-color: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }

        /* è¿™ç§å°æŒ‰é’®ä¸éœ€è¦100%å®½åº¦ */
        .btn-small { width: auto; }

        /* --- æ–‡ç« åˆ—è¡¨å¡ç‰‡ --- */
        .post-card { background: white; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: transform 0.2s; }
        .post-card:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .post-meta { font-size: 0.85rem; color: #888; margin-bottom: 0.5rem; display: flex; justify-content: space-between; }
        .post-title { margin: 0.5rem 0; font-size: 1.5rem; color: #2c3e50; }
        .tags span { background: #e9ecef; color: #495057; padding: 2px 8px; border-radius: 12px; font-size: 0.75rem; margin-right: 5px; }

        /* --- è¡¨å•ä¸ä¸ªäººä¸­å¿ƒ --- */
        .form-box { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 400px; margin: 4rem auto; }
        .form-group { margin-bottom: 1rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        .form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        textarea.form-control { resize: vertical; min-height: 100px; }

        .profile-header { text-align: center; margin-bottom: 2rem; }
        .profile-avatar-large { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #eee; margin-bottom: 1rem; }

        /* åˆ†å‰²çº¿ */
        .divider { display: flex; align-items: center; text-align: center; margin: 1.5rem 0; color: #aaa; font-size: 0.8rem; }
        .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid #eee; }
        .divider::before { margin-right: .5em; }
        .divider::after { margin-left: .5em; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <nav>
        <div class="logo"><a href="#" onclick="showHome()">ğŸš€ JustDRF Blog</a></div>
        <div class="nav-right" id="nav-auth">
            </div>
    </nav>

    <div class="container">

        <section id="login-view" class="page-section">
            <div class="form-box">
                <h2 style="text-align: center; margin-bottom: 1.5rem;">æ¬¢è¿å›æ¥</h2>

                <div class="form-group">
                    <label>ç”¨æˆ·å</label>
                    <input type="text" id="username" class="form-control" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" id="password" class="form-control" placeholder="è¯·è¾“å…¥å¯†ç ">
                </div>

                <button onclick="handleLogin()" class="btn-primary">ç™»å½•</button>

                <div class="divider">æˆ–è€…</div>

                <button onclick="showHome()" class="btn-outline">æˆ‘æ˜¯æ¸¸å®¢ï¼Œç›´æ¥éšä¾¿é€›é€› â†’</button>

                <p style="text-align: center; margin-top: 1.5rem; color: #999; font-size: 0.85rem;">
                    * æ¸¸å®¢åªèƒ½é˜…è¯»æ–‡ç« ï¼Œæ— æ³•å‘å¸ƒæˆ–ä¿®æ”¹ã€‚
                </p>
            </div>
        </section>

        <section id="list-view" class="page-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h2>æœ€æ–°æ–‡ç« </h2>
                <input type="text" id="search-input" placeholder="æœç´¢æ–‡ç« ..." class="form-control" style="width: 200px;" onchange="loadPosts(this.value)">
            </div>
            <div id="posts-container"></div>
        </section>

        <section id="detail-view" class="page-section">
            <button onclick="showHome()" class="btn-outline btn-small">â† è¿”å›åˆ—è¡¨</button>
            <div id="article-content" style="margin-top: 1rem;"></div>
        </section>

        <section id="editor-view" class="page-section">
            <div class="form-box" style="max-width: 800px;">
                <h2 id="editor-title">å†™æ–°æ–‡ç« </h2>
                <input type="hidden" id="edit-post-id">
                <div class="form-group">
                    <label>æ ‡é¢˜</label>
                    <input type="text" id="post-title" class="form-control">
                </div>
                <div class="form-group">
                    <label>åˆ†ç±»</label>
                    <select id="post-category" class="form-control"></select>
                </div>
                <div class="form-group">
                    <label>æ ‡ç­¾ (æŒ‰ä½Ctrlå¤šé€‰)</label>
                    <select id="post-tags" class="form-control" multiple style="height: 100px;"></select>
                </div>
                <div class="form-group">
                    <label>æ­£æ–‡</label>
                    <textarea id="post-body" class="form-control" style="height: 300px;"></textarea>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button onclick="submitPost()" class="btn-primary">å‘å¸ƒ / ä¿å­˜</button>
                    <button onclick="showHome()" class="btn-outline">å–æ¶ˆ</button>
                </div>
            </div>
        </section>

        <section id="profile-view" class="page-section">
            <button onclick="showHome()" class="btn-outline btn-small" style="margin-bottom: 1rem;">â† è¿”å›é¦–é¡µ</button>

            <div class="form-box">
                <div class="profile-header">
                    <img id="profile-avatar-preview" src="" alt="Avatar" class="profile-avatar-large">
                    <h3 id="profile-username-display"></h3>
                    <p style="color: #666; font-size: 0.9rem;">ID: <span id="profile-id-display"></span></p>
                </div>

                <div class="form-group">
                    <label>å¤´åƒ URL</label>
                    <input type="text" id="profile-avatar-input" class="form-control" placeholder="https://..." oninput="updateAvatarPreview(this.value)">
                </div>

                <div class="form-group">
                    <label>ä¸ªäººç®€ä»‹</label>
                    <textarea id="profile-bio-input" class="form-control" placeholder="ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±..."></textarea>
                </div>

                <div class="form-group">
                    <label>é‚®ç®±</label>
                    <input type="email" id="profile-email-input" class="form-control" placeholder="email@example.com">
                </div>

                <button onclick="updateProfile()" class="btn-primary">ä¿å­˜ä¿®æ”¹</button>
            </div>
        </section>

    </div>

    <script src="app.js"></script>
    <script>
        window.onclick = function(event) {
            if (!event.target.matches('.user-avatar-nav')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.parentElement.classList.contains('show-dropdown')) {
                        openDropdown.parentElement.classList.remove('show-dropdown');
                    }
                }
            }
        }
    </script>
</body>
</html>